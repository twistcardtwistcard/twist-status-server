<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TWIST Card Payment</title>
<style>
  :root { --brand:#f97316; --bg:#f3f4f6; --muted:#6b7280; --ok:#16a34a; --bad:#dc2626; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: var(--bg); padding: 1.5rem; }
  .form-wrapper { max-width: 540px; margin: auto; }
  .form-container { background: #fff; padding: 1.5rem; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.06); position: relative; }
  .form-group { margin-bottom: 1rem; }
  label { font-weight: 600; display: block; margin-bottom: 0.35rem; }
  input { width: 100%; padding: .65rem .7rem; font-size: 1rem; border-radius: 8px; border: 1px solid #cfcfcf; outline: none; }
  input:focus { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(249,115,22,.15); }
  .row { display: grid; grid-template-columns: 1fr 1fr; gap: .75rem; }
  button { background: var(--brand); color: #fff; border: 0; padding: .8rem 1.1rem; border-radius: 8px; cursor: pointer; font-weight: 700; }
  button[disabled] { opacity: .6; cursor: not-allowed; }
  .muted { color: var(--muted); font-size: .92rem; }
  .notice { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; padding: .9rem; border-radius: 8px; margin-bottom: 1rem; }
  .hidden { display: none; }
  .spinner { width: 40px; height: 40px; border: 4px solid #ccc; border-top: 4px solid var(--brand); border-radius: 50%; animation: spin 1s linear infinite; margin: 1rem auto; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .ok { color: var(--ok); font-weight: 700; }
  .bad { color: var(--bad); font-weight: 700; }
  .btn-inline { display:flex; gap:.5rem; }
  .err { color: var(--bad); margin-top:.4rem; font-size:.9rem; }
</style>
</head>
<body>
<div class="form-wrapper">
  <h2>Pay for your order with your TWIST CARD</h2>
  <p id="orderDetails" class="muted"></p>

  <div class="form-container" role="region" aria-label="Twist Card payment form">
    <div style="text-align:center; margin-bottom:1rem;">
      <img style="max-width:160px" alt="Twist Card"
           src="https://cdn.shopify.com/s/files/1/0745/9635/2225/files/Twist_500ppx.jpg?v=1748980607">
    </div>

    <div class="notice hidden" id
